import time
class Room:
    name: str
    north: 'Room'
    east: 'Room'
    south: 'Room'
    west: 'Room'
    

    def __init__(self, name, north=None, east=None, south=None, west=None):
        self.name = name
        self.north = north
        self.east = east
        self.west = west
        self.south = south
        
        

        if north:
            north.south = self
        if east:
            east.west = self
        if south:
            south.north = self
        if west:
            west.east = self

    def go_to(self, direction):
        if direction in ['north','south','east','west']:
            return getattr(self, direction) 
        else:
            return None
   

    def __str__(self):
        return self.name


class House:
    current_room: Room
    rooms: list[Room]  # at the moment is not used but could be in the future?

    def __init__(self, current_room: Room, rooms: list[Room]):
        self.current_room = current_room
        self.rooms = rooms

    def go_to(self, direction):
        if next_room := self.current_room.go_to(direction):
            self.current_room = next_room
        return next_room

house_rooms = [sovrummet :=Room('Sovrummet'), toaletten := Room('Toaletten'), köket := Room('Köket'),
               matsalen := Room('Matsalen',south=köket), kontoret := Room('Kontoret', south=sovrummet),
               garderoben := Room('Garderoben', south=kontoret), 
               vardagsrummet := Room('Vardagsrummet', west=matsalen, east=garderoben),
               rum := Room('Rum', north=vardagsrummet, east=kontoret, west=köket), 
               hallen := Room('Hallen', north=rum, west=toaletten, east=sovrummet)]

house = House(current_room=hallen, rooms=house_rooms)

def prompt(text: str):
    print(text)
    

def alternativ():
    print('Du har nedantående alternativ:')
    alternativ_lista = ['1.', '2.', '3.', '4.', '5.']
    if  house.current_room.north != None:
        print(f'{alternativ_lista.pop(0)} Gå till {house.current_room.north}')
    if house.current_room.south != None:
        print(f'{alternativ_lista.pop(0)}Gå till {house.current_room.south}')
    if house.current_room.east != None:
        print(f'{alternativ_lista.pop(0)}Gå till {house.current_room.east}')
    if house.current_room.west != None:
        print(f'{alternativ_lista.pop(0)}Gå till {house.current_room.west}')

    
    return

def ask(text: str) -> str:
    return input(text).strip()


commands = {
    'directions': ['north','south','east','west'],
    "quit": ['q', 'quit']
}

def game_loop():
    prompt(f"\nDu är i {house.current_room}")
    time.sleep(2)
    alternativ()
    
    time.sleep(2)
    command = ask('\nVad vill du göra?').lower()
    
    if command in commands["directions"]:
        if not house.go_to(command):
            prompt("Du kan inte gå dit!")
    elif command in commands["quit"]:
        return False
    else:
        prompt("Vi förstår inte det kommandot.")
    return True
    


if __name__ == '__main__':
    while game_loop():
        pass
